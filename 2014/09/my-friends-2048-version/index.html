<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>My friend's 2048 version &#183; Hrvoje's Blog</title><meta name=description content><meta name=generator content="Hugo 0.74.3"><meta name=twitter:card content="summary"><meta name=twitter:title content="My friend's 2048 version &#183; Hrvoje's Blog"><meta name=twitter:description content><meta property="og:type" content="article"><meta property="og:title" content="My friend's 2048 version &#183; Hrvoje's Blog"><meta property="og:description" content><link rel=stylesheet href=https://blog.hrvoje.org/css/pure-min.css><link rel=stylesheet href=https://blog.hrvoje.org/css/grids-responsive-min.css><link rel=stylesheet href=https://blog.hrvoje.org/css/all.min.css><link rel=stylesheet href=https://blog.hrvoje.org/css/syntax.css><link rel=alternate type=application/rss+xml title="Hrvoje's Blog" href=https://blog.hrvoje.org/index.xml></head><body><div id=layout class="pure-g center"><div class="content pure-u-1 pure-u-md-1-4"></div><div class="sidebar pure-u-1 pure-u-md-1-2"><div class=header><h1 class=brand-title><a href=https://blog.hrvoje.org/>Hrvoje's blog</a></h1><h2 class=brand-tagline>10 PRINT CHR$(205.5+RND(1)); : GOTO 10</h2></div></div><div class="content pure-u-1 pure-u-md-1-4"></div><div class="content pure-u-1 pure-u-md-1-4"></div><div class="content pure-u-1 pure-u-md-1-2"><div><div class=posts><h1 class=content-subhead>27 Sep 2014, 16:37<div class=icons><a href=https://www.linkedin.com/in/hcavrak><i class=icon-linkedin></i></a><a href=https://twitter.com/hcavrak><i class=icon-twitter></i></a><a href=https://github.com/hrvach><i class=icon-github></i></a><a href=https://blog.hrvoje.org/index.xml><i class=icon-rss></i></a></div></h1><section class=post><header class=post-header><a href=https://blog.hrvoje.org/2014/09/my-friends-2048-version/ class=post-title>My friend's 2048 version</a><p class=post-meta></p></header><div class=post-description><p>Recently I tried implementing a cool game called 2048 in Python and make it as short as possible. Thinking I did a decent job, I challenged a friend to give it a go. Blown away how much shorter it turned out to be, all I can say is - kudos to Veky.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python>
<span class=kn>import</span> <span class=nn>random</span> <span class=kn>as</span> <span class=nn>R</span><span class=o>,</span><span class=nn>tkinter</span> <span class=kn>as</span> <span class=nn>T</span>
<span class=k>def</span> <span class=nf>M</span><span class=p>(</span><span class=n>n</span><span class=p>,</span><span class=n>q</span><span class=o>=</span><span class=k>lambda</span> <span class=n>m</span><span class=p>:</span><span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>list</span><span class=p>,</span><span class=nb>zip</span><span class=p>(</span><span class=o>*</span><span class=n>m</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]))),</span><span class=n>u</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;key&#34;</span><span class=p>:</span><span class=nb>bool</span><span class=p>,</span><span class=s2>&#34;reverse&#34;</span><span class=p>:</span><span class=mi>1</span><span class=p>}):</span>
 <span class=n>m</span><span class=o>=</span><span class=n>b</span>
 <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=o>-</span><span class=n>n</span><span class=p>):</span><span class=n>m</span><span class=o>=</span><span class=n>q</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
 <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>m</span><span class=p>:</span>
  <span class=n>r</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=o>**</span><span class=n>u</span><span class=p>)</span>
  <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>):</span>
   <span class=k>if</span> <span class=n>r</span><span class=p>[</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span><span class=o>==</span><span class=n>r</span><span class=p>[</span><span class=n>j</span><span class=p>]:</span><span class=n>r</span><span class=p>[</span><span class=n>j</span><span class=p>:</span><span class=n>j</span><span class=o>+</span><span class=mi>2</span><span class=p>]</span><span class=o>=</span><span class=mi>2</span><span class=o>*</span><span class=n>r</span><span class=p>[</span><span class=n>j</span><span class=p>],</span><span class=mi>0</span>
  <span class=n>r</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=o>**</span><span class=n>u</span><span class=p>)</span>
 <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>):</span><span class=n>m</span><span class=o>=</span><span class=n>q</span><span class=p>(</span><span class=n>m</span><span class=p>)</span>
 <span class=k>return</span> <span class=n>m</span><span class=o>*</span><span class=p>(</span><span class=n>m</span><span class=o>!=</span><span class=n>b</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>A</span><span class=p>(</span><span class=n>q</span><span class=o>=</span><span class=mi>8</span><span class=o>**</span><span class=mi>8</span><span class=o>-</span><span class=mi>1</span><span class=p>):</span>
 <span class=n>k</span><span class=p>,</span><span class=n>l</span><span class=o>=</span><span class=n>R</span><span class=o>.</span><span class=n>choice</span><span class=p>([</span><span class=nb>divmod</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=mi>4</span><span class=p>)</span><span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>b</span><span class=p>,[]))</span><span class=k>if</span> <span class=ow>not</span> <span class=n>j</span><span class=p>])</span>
 <span class=n>b</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>l</span><span class=p>]</span><span class=o>=</span><span class=n>R</span><span class=o>.</span><span class=n>choice</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
 <span class=k>for</span> <span class=n>l</span><span class=p>,</span><span class=n>d</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>L</span><span class=p>,</span><span class=nb>sum</span><span class=p>(</span><span class=n>b</span><span class=p>,[])):</span><span class=n>l</span><span class=o>.</span><span class=n>config</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>d</span> <span class=ow>or</span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=n>bg</span><span class=o>=</span><span class=s1>&#39;#&#39;</span><span class=o>+</span><span class=n>format</span><span class=p>(</span><span class=n>q</span><span class=o>-</span><span class=n>d</span><span class=o>*</span><span class=mi>999</span><span class=p>,</span><span class=s2>&#34;06x&#34;</span><span class=p>))</span>
<span class=k>def</span> <span class=nf>K</span><span class=p>(</span><span class=n>e</span><span class=p>):</span>
 <span class=n>c</span><span class=o>=</span><span class=n>M</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>Left</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span><span class=n>Up</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=n>Right</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span><span class=n>Down</span><span class=o>=</span><span class=mi>3</span><span class=p>)[</span><span class=n>e</span><span class=o>.</span><span class=n>keysym</span><span class=p>])</span>
 <span class=k>if</span> <span class=n>c</span><span class=p>:</span><span class=n>b</span><span class=p>[:]</span><span class=o>=</span><span class=n>c</span><span class=p>;</span><span class=n>A</span><span class=p>()</span>
 <span class=nb>any</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=n>M</span><span class=p>,</span><span class=n>F</span><span class=p>))</span><span class=ow>or</span><span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>config</span><span class=p>(</span><span class=n>bg</span><span class=o>=</span><span class=s1>&#39;red&#39;</span><span class=p>,</span><span class=n>text</span><span class=o>=</span><span class=s1>&#39;&lt;E2&gt;&lt;98&gt;&lt;B9&gt;&#39;</span><span class=p>)</span><span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>L</span><span class=p>]</span>
<span class=n>F</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span><span class=n>b</span><span class=p>,</span><span class=n>t</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=o>*</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>F</span><span class=p>],</span><span class=n>T</span><span class=o>.</span><span class=n>Tk</span><span class=p>();</span><span class=n>t</span><span class=o>.</span><span class=n>grid</span><span class=p>()</span>
<span class=n>L</span><span class=o>=</span><span class=p>[</span><span class=n>T</span><span class=o>.</span><span class=n>Button</span><span class=p>(</span><span class=n>t</span><span class=p>,</span><span class=n>height</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=n>width</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span><span class=n>font</span><span class=o>=</span><span class=p>(</span><span class=s2>&#34;Helvetica&#34;</span><span class=p>,</span><span class=mi>24</span><span class=p>))</span><span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=mi>4</span><span class=o>*</span><span class=n>F</span><span class=p>]</span>
<span class=p>[</span><span class=n>L</span><span class=p>[</span><span class=n>i</span><span class=o>*</span><span class=mi>4</span><span class=o>+</span><span class=n>j</span><span class=p>]</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=n>row</span><span class=o>=</span><span class=n>i</span><span class=p>,</span><span class=n>column</span><span class=o>=</span><span class=n>j</span><span class=p>)</span><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>F</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>F</span><span class=p>]</span>
<span class=n>A</span><span class=p>();</span><span class=n>t</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=s1>&#39;&lt;Key&gt;&#39;</span><span class=p>,</span><span class=n>K</span><span class=p>);</span><span class=n>t</span><span class=o>.</span><span class=n>mainloop</span><span class=p>()</span>


</code></pre></div></div></section></div><div class=footer><div class="pure-menu pure-menu-horizontal pure-menu-open"><ul><li><b>Respecting privacy</b> - No tracking, ads, analytics, pop-ups or off-site content.</li></ul></div></div></div></div><div class="content pure-u-1 pure-u-md-1-4"></div></div><script></script></body></html>